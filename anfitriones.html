<!doctype html>
<html lang="es">
<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
		crossorigin="anonymous"></script>
		<script type="text/javascript" src="assets/js/jquery.js"></script>
	<link rel="stylesheet" href="sitios.css">
	<title>Earthbnb</title>
    <style>
        #footer {
            margin: 20px;
            /*padding: 16px 0;*/
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        #load-more {
            width: calc((70% / 3) - 8px);
            padding: 16px;
            background-color: #212529;
            color: #FFFFFF;
            border: none;
            cursor: pointer;
            transition: all 200ms ease-in-out;
            border-radius: 3px;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.15rem;
        }
        #load-more:not([disabled]):hover {
            box-shadow: 0 1px 9px rgba(0, 0, 0, 0.2);
        }

        #load-more[disabled] {
            background-color: #eaeaea !important;
            color: #909095;
        }
    </style>
</head>

<body>
	<!-- Inicio Menu ::: Luis Romero ::: No tocar -->
	<nav class="navbar navbar-expand-lg navbar-light bg-light">
		<div class="container-fluid">

			<a class="navbar-brand" href="index.html" style="padding-left: 80px;">
				<img src="https://img.freepik.com/premium-vector/home-icon-house-symbol-simple-vector-design-logo_231786-5048.jpg?w=2000"
					alt="" width="30" height="24" class="d-inline-block align-text-top">
				Earthbnb
			</a>

			<button class="navbar-toggler" type="button" data-bs-toggle="collapse"
				data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
				aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>

			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav ms-auto mb-2 mb-lg-0" style="padding-right: 80px;">

					<li class="nav-item">
						<a class="nav-link" href="login.html">
							<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
								class="bi bi-box-arrow-up-right" viewBox="0 0 16 16" style="padding-right:5px">
								<path fill-rule="evenodd"
									d="M8.636 3.5a.5.5 0 0 0-.5-.5H1.5A1.5 1.5 0 0 0 0 4.5v10A1.5 1.5 0 0 0 1.5 16h10a1.5 1.5 0 0 0 1.5-1.5V7.864a.5.5 0 0 0-1 0V14.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5z" />
								<path fill-rule="evenodd"
									d="M16 .5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.793L6.146 9.146a.5.5 0 1 0 .708.708L15 1.707V5.5a.5.5 0 0 0 1 0v-5z" />
							</svg>Login
						</a>
					</li>

					<li class="nav-item">
						<a class="nav-link" href="registro_usuario.html">
							<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
								class="bi bi-person-plus-fill" viewBox="0 0 16 16" style="padding-right:5px">
								<path d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" />
								<path fill-rule="evenodd"
									d="M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z" />
							</svg>Registrar Usuario
						</a>
					</li>

					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
							data-bs-toggle="dropdown" aria-expanded="false">
							<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
								class="bi bi-person-fill" viewBox="0 0 16 16" style="padding-right:5px">
								<path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" />
							</svg>Usuario
						</a>
						<ul class="dropdown-menu" aria-labelledby="navbarDropdown">
							<li>
								<a class="dropdown-item" href="mi-perfil/perfil.html">
									<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
										class="bi bi-person-square" viewBox="0 0 16 16" style="padding-right:5px">
										<path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
										<path
											d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm12 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1v-1c0-1-1-4-6-4s-6 3-6 4v1a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12z" />
									</svg>Perfil
								</a>
							</li>
							<li>
								<a class="dropdown-item" href="reservas.html">
									<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
										class="bi bi-card-checklist" viewBox="0 0 16 16" style="padding-right:5px">
										<path
											d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z" />
										<path
											d="M7 5.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm-1.496-.854a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0l-.5-.5a.5.5 0 1 1 .708-.708l.146.147 1.146-1.147a.5.5 0 0 1 .708 0zM7 9.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm-1.496-.854a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0l-.5-.5a.5.5 0 0 1 .708-.708l.146.147 1.146-1.147a.5.5 0 0 1 .708 0z" />
									</svg>Reservas
								</a>
							</li>
							<li>
								<a class="dropdown-item" href="anuncios.html">
									<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
										class="bi bi-chat-right-dots" viewBox="0 0 16 16" style="padding-right:5px">
										<path
											d="M2 1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h9.586a2 2 0 0 1 1.414.586l2 2V2a1 1 0 0 0-1-1H2zm12-1a2 2 0 0 1 2 2v12.793a.5.5 0 0 1-.854.353l-2.853-2.853a1 1 0 0 0-.707-.293H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12z" />
										<path
											d="M5 6a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z" />
									</svg>Anuncios
								</a>
							</li>
							<li>
								<a class="dropdown-item" href="anfitriones.html">
									<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
										class="bi bi-house-door" viewBox="0 0 16 16" style="padding-right:5px">
										<path
											d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5z" />
									</svg>Anfitriones
								</a>
							</li>
							<li>
								<a class="dropdown-item" href="evaluar_reserva.html">
									<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
										class="bi bi-check2-square" viewBox="0 0 16 16" style="padding-right:5px">
										<path
											d="M3 14.5A1.5 1.5 0 0 1 1.5 13V3A1.5 1.5 0 0 1 3 1.5h8a.5.5 0 0 1 0 1H3a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V8a.5.5 0 0 1 1 0v5a1.5 1.5 0 0 1-1.5 1.5H3z" />
										<path
											d="m8.354 10.354 7-7a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0z" />
									</svg>Evaluar reserva
								</a>
							</li>
							<li>
								<a class="dropdown-item" href="historial_pagos.html">
									<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
										class="bi bi-cash" viewBox="0 0 16 16" style="padding-right:5px">
										<path d="M8 10a2 2 0 1 0 0-4 2 2 0 0 0 0 4z" />
										<path
											d="M0 4a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V4zm3 0a2 2 0 0 1-2 2v4a2 2 0 0 1 2 2h10a2 2 0 0 1 2-2V6a2 2 0 0 1-2-2H3z" />
									</svg>Historial de pagos
								</a>
							</li>
							<li>
								<a class="dropdown-item" href="reportes.html">
									<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
										class="bi bi-card-list" viewBox="0 0 16 16" style="padding-right:5px">
										<path
											d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z" />
										<path
											d="M5 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 5 8zm0-2.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0 5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-1-5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zM4 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm0 2.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z" />
									</svg>Reportes
								</a>
							</li>
							<!-- Cerrar Session -->
							<li>
								<a class="dropdown-item" href="../login.html">
								  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
									class="bi bi-card-list" viewBox="0 0 16 16" style="padding-right:5px">
									<path
									  d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z" />
									<path
									  d="M5 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 5 8zm0-2.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0 5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-1-5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zM4 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm0 2.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z" />
								  </svg>
								  Cerrar Sesion
								</a>
							</li>
						</ul>
					</li>

				</ul>
			</div>
      </div>

		</nav>
		<!-- Fin Menu ::: Luis Romero ::: No tocar -->
		<div class="container" id="container">
			<!-- TODOCODIGO AQUI -->
			<h3>Anfitriones</h3>
			<button id="btnCrearAnuncio" type="button" class="btn btn-dark">
				Crear Anuncio
			</button>
			<button id="btnLstReservas" type="button" class="btn btn-dark">
				Reservas
			</button>
		</div>
    <div id="footer">
        <button id="load-more">Cargar más</button>
			<span>Mostrando
                <span id="card-count"></span> de
                <span id="card-total"></span> anuncios
	        </span>

    </div>
	</body>
    <script type="text/javascript" src="anfitriones.js"></script>
	<script type="text/javascript">

		function eliminarAnuncio(titulo, id) {
			if (confirm('Está seguro que desea eliminar este anuncio ' + titulo)) {
				Eliminar(findPositionInDBById(id))
			}
		}

		$(document).ready(function() {
		  
		  	$('#btnCrearAnuncio').on('click', function() {
					$(location).attr('href','anuncios_espacio.html');
			});

			$('#btnLstReservas').on('click', function() {
					$(location).attr('href','evaluar_reserva.html');
			});

            // CARDs
            if (localStorage.getItem("dbAnfitriones") === null) {
                localStorage.setItem("dbAnfitriones",JSON.parse(JSON.stringify('{"anuncios":[{"id":"001","titulo":"Casa de playa","descripcion_anuncio":"Con hermosa vista al mar","precio_noche":200,"tipo_inmueble":"Apartamento","tipo_alojamiento":"Vivienda Vacacional","direccion":"Miraflores","huespedes":3,"camas":3,"baños":1,"dormitorios":2,"estado":true},{"id":"002","titulo":"Casa Residencial","tipo_inmueble":"Bed and Breakfast","tipo_alojamiento":"Piso","direccion":"San Martin","huespedes":6,"camas":5,"baños":1,"dormitorios":5,"estado":true,"precio_noche":250,"descripcion_anuncio":"Internet Ilimitado"},{"id":"003","titulo":"Hotel Familiar","tipo_inmueble":"Hotel Boutique","tipo_alojamiento":"Casa Particular","direccion":"Surco","huespedes":6,"camas":5,"baños":1,"dormitorios":5,"estado":true,"precio_noche":250,"descripcion_anuncio":"Comodo Hotel, muy tranquilo"},{"id":"004","titulo":"Edificio de Estreno","tipo_inmueble":"Bed and Breakfast","tipo_alojamiento":"Vivienda Vacacional","direccion":"Breña","huespedes":6,"camas":5,"baños":1,"dormitorios":5,"estado":true,"precio_noche":250,"descripcion_anuncio":"Remodelado"},{"id":"005","titulo":"Apartamento  de Ocio","tipo_inmueble":"Bed and Breakfast","tipo_alojamiento":"Left","direccion":"Breña","huespedes":6,"camas":5,"baños":1,"dormitorios":5,"estado":true,"precio_noche":250,"descripcion_anuncio":"A una cuadras de la Rambla"},{"id":"006","titulo":"Casa en Alquiler","tipo_inmueble":"Bed and Breakfast","tipo_alojamiento":"Left","direccion":"San Borja","huespedes":6,"camas":5,"baños":1,"dormitorios":5,"estado":true,"precio_noche":250,"descripcion_anuncio":"Incluye Luz + Agua"},{"id":"007","titulo":"Playita al Norte 7","tipo_inmueble":"Hotel Boutique","tipo_alojamiento":"Left","direccion":"Lima-San Martin","huespedes":6,"camas":5,"baños":1,"dormitorios":5,"estado":true,"precio_noche":250,"descripcion_anuncio":"Con cochera incluida"},{"id":"008","titulo":"Playita al Norte 8","tipo_inmueble":"Hotel Boutique","tipo_alojamiento":"Casa Particular","direccion":"Lima-San Martin","huespedes":6,"camas":5,"baños":1,"dormitorios":5,"estado":true,"precio_noche":250,"descripcion_anuncio":"blebleble"},{"id":"009","titulo":"Playita al Norte 9","tipo_inmueble":"Bed and Breakfast","tipo_alojamiento":"Left","direccion":"Lima-San Martin","huespedes":6,"camas":5,"baños":1,"dormitorios":5,"estado":true,"precio_noche":250,"descripcion_anuncio":"blebleble"},{"id":"0010","titulo":"Playita al Norte 10","tipo_inmueble":"Bed and Breakfast","tipo_alojamiento":"Left","direccion":"Lima-San Martin","huespedes":6,"camas":5,"baños":1,"dormitorios":5,"estado":true,"precio_noche":250,"descripcion_anuncio":"blebleble"},{"id":"0011","titulo":"Playita al Norte 11","tipo_inmueble":"Bed and Breakfast","tipo_alojamiento":"Left","direccion":"Lima-San Martin","huespedes":6,"camas":5,"baños":1,"dormitorios":5,"estado":true,"precio_noche":250,"descripcion_anuncio":"blebleble"},{"id":"0012","titulo":"Playita al Norte 12","tipo_inmueble":"Bed and Breakfast","tipo_alojamiento":"Left","direccion":"Lima-San Martin","huespedes":6,"camas":5,"baños":1,"dormitorios":5,"estado":true,"precio_noche":250,"descripcion_anuncio":"blebleble"}]}')));
				location.reload();
			}
            addCards(currentPage);
            loadMoreButton.addEventListener("click", () => {
                addCards(currentPage + 1);
            });

        });

        //------------------
        const loadMoreButton = document.getElementById("load-more");
        const cardCountElem = document.getElementById("card-count"); //
        const cardTotalElem = document.getElementById("card-total"); //

        const cardLimit = dbAnfitriones["anuncios"].length;
        const cardIncrease = 6;
        const pageCount = Math.ceil(cardLimit / cardIncrease);
        let currentPage = 1;

        cardTotalElem.innerHTML = cardLimit;

        const handleButtonStatus = () => {
            if (pageCount === currentPage) {
                loadMoreButton.classList.add("disabled");
                loadMoreButton.setAttribute("disabled", true);
            }
        };

        let lastCurrentRowId = "";

        const createRow = (id) => {
            lastCurrentRowId = "row-" + id;
            $(".container").append(
                `
         <div class="row" id=${lastCurrentRowId}>
            <div class="row p-4 text-center">

            </div>
        </div>
        `
            );
        }

        const createCard = (anuncio) => {
            $("#" + lastCurrentRowId).children().append(
                `
       <div class="col-12 col-lg-4 pb-3 px-0 px-lg-3">
            <div class="card" style="width: 20rem;">
              <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill ${anuncio.estado ? "bg-success":"bg-danger"}"> ${anuncio.estado ? "ON":"OFF"}
				<span class="visually-hidden"></span>
		      </span>
                <a href=anuncio_detalle.html?id=${anuncio.id}>
					<img class="card-img-top" src="sitios-disponibles/12vistasol-psicina-abastel.jpg" alt="">
                    <div class="card-body">
                        <h5>${anuncio.titulo}</h5>
                        <h6>${anuncio.tipo_alojamiento}</h6>
                        <label>${anuncio.direccion}_</label>
                        <label>_S/.${anuncio.precio_noche} x Noche</label>
                    </div>
                </a>
                <button type="button" onclick="eliminarAnuncio('${anuncio.titulo}','${anuncio.id}')"
                class="btn btn-danger btn-sm">Eliminar</button>
            </div>
        </div>
        `
            );
        };

        const addCards = (pageIndex) => {
            currentPage = pageIndex;
            handleButtonStatus();
            const startRange = (pageIndex - 1) * cardIncrease;
            const endRange = pageIndex * cardIncrease > cardLimit ? cardLimit : pageIndex * cardIncrease;
            cardCountElem.innerHTML = endRange;
            for (let i = startRange + 1; i <= endRange; i++) {
                if ((i-1) % 3 === 0) {
                    createRow(i-1);
                }
                createCard(dbAnfitriones["anuncios"][i - 1]);
            }
        };

	</script>

</html>